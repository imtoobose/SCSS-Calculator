function clear(){$(".number-view").val("")}function update(a){$(".number-view").val(a)}function operate(a,b,c){var d;return d="plus"==a?b+c:"-"==a?b-c:"divide"==a?b/c:b*c}function calculate(a,b){if(""!=b){if(isNaN(b))return void clear();if(b=+b,arr.length>0){var d;d=operate(arr[1],arr[0],b),arr.shift(),arr.shift(),arr.push(d,a),clear()}else arr.push(b,a),clear()}else if(arr.length>0){var c=arr[0];return arr.shift(),arr.shift(),arr.push(c),void arr.push(a)}}function addUp(a){var b="#"+a.target.id,c=$(b).val(),d=$(".number-view").val();if(isNaN(c)&&"."!=c){if(ops.test(c))calculate(c,d);else if("C"==c){for(;0!==arr.length;)arr.shift();clear(),ans=null}else if("CE"==c)clear();else if("back"==c)update(d.length>1?d.substring(0,d.length-1):"");else if("ANS"==c)isNaN(ans)||(update(ans),checked=1);else if("equals"==c&&0!==arr.length){if(d.length>0)var e=operate(arr[1],arr[0],+d);else e=arr[0];(""+e).length>15&&(e=e.toPrecision(12)),ans=e,update(e),arr.shift(),arr.shift(),checked=1}}else 1==checked?(clear(),checked=-1,update(c)):d.length<=12&&update(d+c)}function board(a){var b=a.which;8==a.keyCode&&a.preventDefault(),46==a.keyCode&&$("#back").click(),a.shiftKey?56==b?$("#val-x").click():187==b?$("#val-plus").click():189==b&&$("#val--").click():58>(b>47)&&$("#val-"+(b-48)).click(),189==b?$("#val--").click():191==b?$("#val-div").click():32==b?$("#val-equal").click():106==b?$("#val-x").click():190==b&&$("#val-dot").click()}function everything(){$(".btn").on("click",addUp),$(document).on("keydown",board)}var ans=null,checked=-1,ops=/x|plus|divide|\-/i,arr=[];$(document).ready(everything);
